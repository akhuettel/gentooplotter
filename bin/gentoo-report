#!/bin/bash

[ -f ~/.gentooplotter ] && source ~/.gentoplotter
# things that can be set in there: 
# plotdir: the main directory from the git repo

plotdir="${plotdir:-/home/huettel/gentooplotter}"

logdir=${plotdir}/log
webdir=${plotdir}/html
bindir=${plotdir}/bin
moddir=${plotdir}/bin/modules
tmpdir=${plotdir}/tmp

now=`date -u +%s`
plotsize='700'

for script in ${moddir}/*.extract ; do 

  export modname=$(basename ${script} .extract)

  # now evaluate
  echo "$now	$(source ${modname}.extract)" >> $logdir/${modname}.log

  for scope in month all year ; do 
    case $scope in 
        all)
                timefrom="1303676000"
                ;;
        year)
                timefrom=$(($NOW-60*60*24*365))
                ;;
        month)
                timefrom=$(($NOW-60*60*24*31))
                ;;
    esac
    source ${moddir}/${modname}.plot  
  done

done
